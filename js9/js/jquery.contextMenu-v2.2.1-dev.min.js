/*
 jQuery contextMenu v2.2.1-dev - Plugin for simple contextMenu handling

 Version: v2.2.1-dev

 Authors: Bj?rn Brala (SWIS.nl), Rodney Rehm, Addy Osmani (patches for FF)
 Web: http://swisnl.github.io/jQuery-contextMenu/

 Copyright (c) 2011-2016 SWIS BV and contributors

 Licensed under
   MIT License http://www.opensource.org/licenses/mit-license
   GPL v3 http://opensource.org/licenses/GPL-3.0

 Date: 2016-06-13T14:00:33.638Z
*/
var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(c,q,n){c instanceof String&&(c=String(c));for(var r=c.length,l=0;l<r;l++){var w=c[l];if(q.call(n,w,l,c))return{i:l,v:w}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(c,q,n){c!=Array.prototype&&c!=Object.prototype&&(c[q]=n.value)};$jscomp.getGlobal=function(c){return"undefined"!=typeof window&&window===c?c:"undefined"!=typeof global&&null!=global?global:c};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.polyfill=function(c,q,n,r){if(q){n=$jscomp.global;c=c.split(".");for(r=0;r<c.length-1;r++){var l=c[r];l in n||(n[l]={});n=n[l]}c=c[c.length-1];r=n[c];q=q(r);q!=r&&null!=q&&$jscomp.defineProperty(n,c,{configurable:!0,writable:!0,value:q})}};$jscomp.polyfill("Array.prototype.find",function(c){return c?c:function(c,n){return $jscomp.findInternal(this,c,n).v}},"es6","es3");
(function(c){"function"===typeof define&&define.amd?define(["jquery"],c):"object"===typeof exports?c(require("jquery")):c(jQuery)})(function(c){function q(a){a=a.split(/\s+/);for(var b=[],c=0,f;f=a[c];c++)f=f.charAt(0).toUpperCase(),b.push(f);return b}function n(a){return a.id&&c('label[for="'+a.id+'"]').val()||a.name}function r(a,b,e){e||(e=0);b.each(function(){var b=c(this),d=this,g=this.nodeName.toLowerCase();if("label"===g&&b.find("input, textarea, select").length){var m=b.text();b=b.children().first();
d=b.get(0);g=d.nodeName.toLowerCase()}switch(g){case "menu":var k={name:b.attr("label"),items:{}};e=r(k.items,b.children(),e);break;case "a":case "button":k={name:b.text(),disabled:!!b.attr("disabled"),callback:function(){return function(){b.click()}}()};break;case "menuitem":case "command":switch(b.attr("type")){case void 0:case "command":case "menuitem":k={name:b.attr("label"),disabled:!!b.attr("disabled"),icon:b.attr("icon"),callback:function(){return function(){b.click()}}()};break;case "checkbox":k=
{type:"checkbox",disabled:!!b.attr("disabled"),name:b.attr("label"),selected:!!b.attr("checked")};break;case "radio":k={type:"radio",disabled:!!b.attr("disabled"),name:b.attr("label"),radio:b.attr("radiogroup"),value:b.attr("id"),selected:!!b.attr("checked")};break;default:k=void 0}break;case "hr":k="-------";break;case "input":switch(b.attr("type")){case "text":k={type:"text",name:m||n(d),disabled:!!b.attr("disabled"),value:b.val()};break;case "checkbox":k={type:"checkbox",name:m||n(d),disabled:!!b.attr("disabled"),
selected:!!b.attr("checked")};break;case "radio":k={type:"radio",name:m||n(d),disabled:!!b.attr("disabled"),radio:!!b.attr("name"),value:b.val(),selected:!!b.attr("checked")};break;default:k=void 0}break;case "select":k={type:"select",name:m||n(d),disabled:!!b.attr("disabled"),selected:b.val(),options:{}};b.children().each(function(){k.options[this.value]=c(this).text()});break;case "textarea":k={type:"textarea",name:m||n(d),disabled:!!b.attr("disabled"),value:b.val()};break;case "label":break;default:k=
{type:"html",html:b.clone(!0)}}k&&(e++,a["key"+e]=k)});return e}c.support.htmlMenuitem="HTMLMenuItemElement"in window;c.support.htmlCommand="HTMLCommandElement"in window;c.support.eventSelectstart="onselectstart"in document.documentElement;c.ui&&c.widget||(c.cleanData=function(a){return function(b){var e,f;for(f=0;null!=b[f];f++){var d=b[f];try{(e=c._data(d,"events"))&&e.remove&&c(d).triggerHandler("remove")}catch(g){}}a(b)}}(c.cleanData));var l=null,w=!1,u=c(window),y=0,v={},p={},z={},A={selector:null,
appendTo:null,trigger:"right",autoHide:!1,delay:200,reposition:!0,classNames:{hover:"context-menu-hover",disabled:"context-menu-disabled",visible:"context-menu-visible",notSelectable:"context-menu-not-selectable",icon:"context-menu-icon",iconEdit:"context-menu-icon-edit",iconCut:"context-menu-icon-cut",iconCopy:"context-menu-icon-copy",iconPaste:"context-menu-icon-paste",iconDelete:"context-menu-icon-delete",iconAdd:"context-menu-icon-add",iconQuit:"context-menu-icon-quit"},determinePosition:function(a){if(c.ui&&
c.ui.position)a.css("display","block").position({my:"center top",at:"center bottom",of:this,offset:"0 5",collision:"fit"}).css("display","none");else{var b=this.offset();b.top+=this.outerHeight();b.left+=this.outerWidth()/2-a.outerWidth()/2;a.css(b)}},position:function(a,b,c){if(b||c){b="maintain"===b&&"maintain"===c?a.$menu.position():{top:c,left:b};c=u.scrollTop()+u.height();var e=u.scrollLeft()+u.width(),d=a.$menu.outerHeight(),g=a.$menu.outerWidth();b.top+d>c&&(b.top-=d);0>b.top&&(b.top=0);b.left+
g>e&&(b.left-=g);0>b.left&&(b.left=0);a.$menu.css(b)}else a.determinePosition.call(this,a.$menu)},positionSubmenu:function(a){if(c.ui&&c.ui.position)a.css("display","block").position({my:"left top",at:"right top",of:this,collision:"flipfit fit"}).css("display","");else{var b={top:0,left:this.outerWidth()};a.css(b)}},zIndex:1,animation:{duration:50,show:"slideDown",hide:"slideUp"},events:{show:c.noop,hide:c.noop},callback:null,items:{}},x=null,B=null,C=null,D,E=function(a){for(var b=0;b=Math.max(b,
parseInt(a.css("z-index"),10)||0),a=a.parent(),a&&a.length&&!(-1<"html body".indexOf(a.prop("nodeName").toLowerCase())););return b},h={abortevent:function(a){a.preventDefault();a.stopImmediatePropagation()},contextmenu:function(a){var b=c(this);"right"===a.data.trigger&&(a.preventDefault(),a.stopImmediatePropagation());if(!("right"!==a.data.trigger&&"demand"!==a.data.trigger&&a.originalEvent||void 0!==a.mouseButton&&a.data&&!("left"===a.data.trigger&&0===a.mouseButton||"right"===a.data.trigger&&2===
a.mouseButton)||b.hasClass("context-menu-active")||b.hasClass("context-menu-disabled"))){l=b;if(a.data.build){var e=a.data.build(l,a);if(!1===e)return;a.data=c.extend(!0,{},A,a.data,e||{});if(!a.data.items||c.isEmptyObject(a.data.items))throw window.console&&(console.error||console.log).call(console,"No items specified to show in contextMenu"),Error("No Items specified");a.data.$trigger=l;t.create(a.data)}e=!1;for(var f in a.data.items)a.data.items.hasOwnProperty(f)&&(c.isFunction(a.data.items[f].visible)?
a.data.items[f].visible.call(c(a.currentTarget),f,a.data):"undefined"!==typeof f.visible?!0===a.data.items[f].visible:1)&&(e=!0);e&&(null===a.data.appendTo?c("body"):c(a.data.appendTo),t.show.call(b,a.data,a.pageX,a.pageY))}},click:function(a){a.preventDefault();a.stopImmediatePropagation();c(this).trigger(c.Event("contextmenu",{data:a.data,pageX:a.pageX,pageY:a.pageY}))},mousedown:function(a){var b=c(this);l&&l.length&&!l.is(b)&&l.data("contextMenu").$menu.trigger("contextmenu:hide");2===a.button&&
(l=b.data("contextMenuActive",!0))},mouseup:function(a){var b=c(this);b.data("contextMenuActive")&&l&&l.length&&l.is(b)&&!b.hasClass("context-menu-disabled")&&(a.preventDefault(),a.stopImmediatePropagation(),l=b,b.trigger(c.Event("contextmenu",{data:a.data,pageX:a.pageX,pageY:a.pageY})));b.removeData("contextMenuActive")},mouseenter:function(a){var b=c(this),e=c(a.relatedTarget),f=c(document);e.is(".context-menu-list")||e.closest(".context-menu-list").length||l&&l.length||(B=a.pageX,C=a.pageY,D=a.data,
f.on("mousemove.contextMenuShow",h.mousemove),x=setTimeout(function(){x=null;f.off("mousemove.contextMenuShow");l=b;b.trigger(c.Event("contextmenu",{data:D,pageX:B,pageY:C}))},a.data.delay))},mousemove:function(a){B=a.pageX;C=a.pageY},mouseleave:function(a){a=c(a.relatedTarget);if(!a.is(".context-menu-list")&&!a.closest(".context-menu-list").length){try{clearTimeout(x)}catch(b){}x=null}},layerClick:function(a){var b=c(this).data("contextMenuRoot"),e=a.button,f=a.pageX,d=a.pageY,g,m;a.preventDefault();
a.stopImmediatePropagation();setTimeout(function(){var k="left"===b.trigger&&0===e||"right"===b.trigger&&2===e;document.elementFromPoint&&b.$layer&&(b.$layer.hide(),g=document.elementFromPoint(f-u.scrollLeft(),d-u.scrollTop()),b.$layer.show());if(b.reposition&&k)if(document.elementFromPoint){if(b.$trigger.is(g)||b.$trigger.has(g).length){b.position.call(b.$trigger,b,f,d);return}}else{m=b.$trigger.offset();var h=c(window);m.top+=h.scrollTop();if(m.top<=a.pageY&&(m.left+=h.scrollLeft(),m.left<=a.pageX&&
(m.bottom=m.top+b.$trigger.outerHeight(),m.bottom>=a.pageY&&(m.right=m.left+b.$trigger.outerWidth(),m.right>=a.pageX)))){b.position.call(b.$trigger,b,f,d);return}}if(g&&k)b.$trigger.one("contextmenu:hidden",function(){c(g).contextMenu({x:f,y:d,button:e})});b.$menu.trigger("contextmenu:hide")},50)},keyStop:function(a,b){b.isInput||a.preventDefault();a.stopPropagation()},key:function(a){var b={};l&&(b=l.data("contextMenu")||{});void 0===b.zIndex&&(b.zIndex=0);var c=0,f=function(a){""!==a.style.zIndex?
c=a.style.zIndex:null!==a.offsetParent&&void 0!==a.offsetParent?f(a.offsetParent):null!==a.parentElement&&void 0!==a.parentElement&&f(a.parentElement)};f(a.target);if(!(c>b.zIndex)){switch(a.keyCode){case 9:case 38:h.keyStop(a,b);if(b.isInput){if(9===a.keyCode&&a.shiftKey){a.preventDefault();b.$selected&&b.$selected.find("input, textarea, select").blur();b.$menu.trigger("prevcommand");return}if(38===a.keyCode&&"checkbox"===b.$selected.find("input, textarea, select").prop("type")){a.preventDefault();
return}}else if(9!==a.keyCode||a.shiftKey){b.$menu.trigger("prevcommand");return}break;case 40:h.keyStop(a,b);if(b.isInput){if(9===a.keyCode){a.preventDefault();b.$selected&&b.$selected.find("input, textarea, select").blur();b.$menu.trigger("nextcommand");return}if(40===a.keyCode&&"checkbox"===b.$selected.find("input, textarea, select").prop("type")){a.preventDefault();return}}else{b.$menu.trigger("nextcommand");return}break;case 37:h.keyStop(a,b);if(b.isInput||!b.$selected||!b.$selected.length)break;
if(!b.$selected.parent().hasClass("context-menu-root")){a=b.$selected.parent().parent();b.$selected.trigger("contextmenu:blur");b.$selected=a;return}break;case 39:h.keyStop(a,b);if(b.isInput||!b.$selected||!b.$selected.length)break;var d=b.$selected.data("contextMenu")||{};if(d.$menu&&b.$selected.hasClass("context-menu-submenu")){b.$selected=null;d.$selected=null;d.$menu.trigger("nextcommand");return}break;case 35:case 36:b.$selected&&b.$selected.find("input, textarea, select").length||((b.$selected&&
b.$selected.parent()||b.$menu).children(":not(."+b.classNames.disabled+", ."+b.classNames.notSelectable+")")[36===a.keyCode?"first":"last"]().trigger("contextmenu:focus"),a.preventDefault());return;case 13:h.keyStop(a,b);if(b.isInput){if(b.$selected&&!b.$selected.is("textarea, select")){a.preventDefault();return}break}"undefined"!==typeof b.$selected&&null!==b.$selected&&b.$selected.trigger("mouseup");return;case 32:case 33:case 34:h.keyStop(a,b);return;case 27:h.keyStop(a,b);b.$menu.trigger("contextmenu:hide");
return;default:if(d=String.fromCharCode(a.keyCode).toUpperCase(),b.accesskeys&&b.accesskeys[d]){b.accesskeys[d].$node.trigger(b.accesskeys[d].$menu?"contextmenu:focus":"mouseup");return}}a.stopPropagation();"undefined"!==typeof b.$selected&&null!==b.$selected&&b.$selected.trigger(a)}},prevItem:function(a){a.stopPropagation();var b=c(this).data("contextMenu")||{},e=c(this).data("contextMenuRoot")||{};if(b.$selected){var f=b.$selected;b=b.$selected.parent().data("contextMenu")||{};b.$selected=f}f=b.$menu.children();
for(var d=b.$selected&&b.$selected.prev().length?b.$selected.prev():f.last(),g=d;d.hasClass(e.classNames.disabled)||d.hasClass(e.classNames.notSelectable)||d.is(":hidden");)if(d=d.prev().length?d.prev():f.last(),d.is(g))return;b.$selected&&h.itemMouseleave.call(b.$selected.get(0),a);h.itemMouseenter.call(d.get(0),a);a=d.find("input, textarea, select");a.length&&a.focus()},nextItem:function(a){a.stopPropagation();var b=c(this).data("contextMenu")||{},e=c(this).data("contextMenuRoot")||{};if(b.$selected){var f=
b.$selected;b=b.$selected.parent().data("contextMenu")||{};b.$selected=f}f=b.$menu.children();for(var d=b.$selected&&b.$selected.next().length?b.$selected.next():f.first(),g=d;d.hasClass(e.classNames.disabled)||d.hasClass(e.classNames.notSelectable)||d.is(":hidden");)if(d=d.next().length?d.next():f.first(),d.is(g))return;b.$selected&&h.itemMouseleave.call(b.$selected.get(0),a);h.itemMouseenter.call(d.get(0),a);a=d.find("input, textarea, select");a.length&&a.focus()},focusInput:function(){var a=c(this).closest(".context-menu-item"),
b=a.data(),e=b.contextMenu;b=b.contextMenuRoot;b.$selected=e.$selected=a;b.isInput=e.isInput=!0},blurInput:function(){var a=c(this).closest(".context-menu-item").data();a.contextMenuRoot.isInput=a.contextMenu.isInput=!1},menuMouseenter:function(){c(this).data().contextMenuRoot.hovering=!0},menuMouseleave:function(a){var b=c(this).data().contextMenuRoot;b.$layer&&b.$layer.is(a.relatedTarget)&&(b.hovering=!1)},itemMouseenter:function(a){var b=c(this),e=b.data(),f=e.contextMenu;e=e.contextMenuRoot;e.hovering=
!0;a&&e.$layer&&e.$layer.is(a.relatedTarget)&&(a.preventDefault(),a.stopImmediatePropagation());(f.$menu?f:e).$menu.children("."+e.classNames.hover).trigger("contextmenu:blur").children(".hover").trigger("contextmenu:blur");b.hasClass(e.classNames.disabled)||b.hasClass(e.classNames.notSelectable)?f.$selected=null:b.trigger("contextmenu:focus")},itemMouseleave:function(a){var b=c(this),e=b.data(),f=e.contextMenu;e=e.contextMenuRoot;e!==f&&e.$layer&&e.$layer.is(a.relatedTarget)?("undefined"!==typeof e.$selected&&
null!==e.$selected&&e.$selected.trigger("contextmenu:blur"),a.preventDefault(),a.stopImmediatePropagation(),e.$selected=f.$selected=f.$node):b.trigger("contextmenu:blur")},itemClick:function(a){var b=c(this),e=b.data(),f=e.contextMenuRoot,d=e.contextMenuKey;if(e.contextMenu.items[d]&&!b.is("."+f.classNames.disabled+", .context-menu-submenu, .context-menu-separator, ."+f.classNames.notSelectable)){a.preventDefault();a.stopImmediatePropagation();if(c.isFunction(f.callbacks[d])&&Object.prototype.hasOwnProperty.call(f.callbacks,
d))a=f.callbacks[d];else if(c.isFunction(f.callback))a=f.callback;else return;!1!==a.call(f.$trigger,d,f)?f.$menu.trigger("contextmenu:hide"):f.$menu.parent().length&&t.update.call(f.$trigger,f)}},inputClick:function(a){a.stopImmediatePropagation()},hideMenu:function(a,b){a=c(this).data("contextMenuRoot");t.hide.call(a.$trigger,a,b&&b.force)},focusItem:function(a){a.stopPropagation();a=c(this);var b=a.data(),e=b.contextMenu;b=b.contextMenuRoot;a.hasClass(b.classNames.disabled)||a.hasClass(b.classNames.notSelectable)||
(a.addClass([b.classNames.hover,b.classNames.visible].join(" ")).parent().find(".context-menu-item").not(a).removeClass(b.classNames.visible).filter("."+b.classNames.hover).trigger("contextmenu:blur"),e.$selected=b.$selected=a,e.$node&&b.positionSubmenu.call(e.$node,e.$menu))},blurItem:function(a){a.stopPropagation();a=c(this);var b=a.data(),e=b.contextMenu;b=b.contextMenuRoot;e.autoHide&&a.removeClass(b.classNames.visible);a.removeClass(b.classNames.hover);e.$selected=null}},t={show:function(a,b,
e){var f=c(this),d={};c("#context-menu-layer").trigger("mousedown");a.$trigger=f;if(!1===a.events.show.call(f,a))l=null;else if(t.update.call(f,a),a.position.call(f,a,b,e),a.zIndex&&(b=a.zIndex,"function"===typeof a.zIndex&&(b=a.zIndex.call(f,a)),d.zIndex=E(f)+b),t.layer.call(a.$menu,a,d.zIndex),a.$menu.find("ul").css("zIndex",d.zIndex+1),a.$menu.css(d)[a.animation.show](a.animation.duration,function(){f.trigger("contextmenu:visible")}),f.data("contextMenu",a).addClass("context-menu-active"),c(document).off("keydown.contextMenu").on("keydown.contextMenu",
h.key),a.autoHide)c(document).on("mousemove.contextMenuAutoHide",function(b){var c=f.offset();c.right=c.left+f.outerWidth();c.bottom=c.top+f.outerHeight();!a.$layer||a.hovering||b.pageX>=c.left&&b.pageX<=c.right&&b.pageY>=c.top&&b.pageY<=c.bottom||setTimeout(function(){a.hovering||a.$menu.trigger("contextmenu:hide")},50)})},hide:function(a,b){var e=c(this);a||(a=e.data("contextMenu")||{});if(b||!a.events||!1!==a.events.hide.call(e,a)){e.removeData("contextMenu").removeClass("context-menu-active");
if(a.$layer){setTimeout(function(a){return function(){a.remove()}}(a.$layer),10);try{delete a.$layer}catch(f){a.$layer=null}}l=null;a.$menu.find("."+a.classNames.hover).trigger("contextmenu:blur");a.$selected=null;a.$menu.find("."+a.classNames.visible).removeClass(a.classNames.visible);c(document).off(".contextMenuAutoHide").off("keydown.contextMenu");if(a.$menu)a.$menu[a.animation.hide](a.animation.duration,function(){a.build&&(a.$menu.remove(),c.each(a,function(b){switch(b){case "ns":case "selector":case "build":case "trigger":return!0;
default:a[b]=void 0;try{delete a[b]}catch(d){}return!0}}));setTimeout(function(){e.trigger("contextmenu:hidden")},10)})}},create:function(a,b){function e(a){var b=c("<span></span>");if(a._accesskey)a._beforeAccesskey&&b.append(document.createTextNode(a._beforeAccesskey)),c("<span></span>").addClass("context-menu-accesskey").text(a._accesskey).appendTo(b),a._afterAccesskey&&b.append(document.createTextNode(a._afterAccesskey));else if(a.isHtmlName){if("undefined"!==typeof a.accesskey)throw Error("accesskeys are not compatible with HTML names and cannot be used together in the same item");
b.html(a.name)}else b.text(a.name);return b}void 0===b&&(b=a);a.$menu=c('<ul class="context-menu-list"></ul>').addClass(a.className||"").data({contextMenu:a,contextMenuRoot:b});c.each(["callbacks","commands","inputs"],function(c,d){a[d]={};b[d]||(b[d]={})});b.accesskeys||(b.accesskeys={});c.each(a.items,function(f,d){var g=c('<li class="context-menu-item"></li>').addClass(d.className||""),m=null,k=null;g.on("click",c.noop);"string"===typeof d&&(d={type:"cm_seperator"});d.$node=g.data({contextMenu:a,
contextMenuRoot:b,contextMenuKey:f});if("undefined"!==typeof d.accesskey)for(var l=q(d.accesskey),n=0,p;p=l[n];n++)if(!b.accesskeys[p]){b.accesskeys[p]=d;if(l=d.name.match(new RegExp("^(.*?)("+p+")(.*)$","i")))d._beforeAccesskey=l[1],d._accesskey=l[2],d._afterAccesskey=l[3];break}if(d.type&&z[d.type])z[d.type].call(g,d,a,b),c.each([a,b],function(a,b){b.commands[f]=d;c.isFunction(d.callback)&&(b.callbacks[f]=d.callback)});else{"cm_seperator"===d.type?g.addClass("context-menu-separator "+b.classNames.notSelectable):
"html"===d.type?g.addClass("context-menu-html "+b.classNames.notSelectable):d.type?(m=c("<label></label>").appendTo(g),e(d).appendTo(m),g.addClass("context-menu-input"),a.hasTypes=!0,c.each([a,b],function(a,b){b.commands[f]=d;b.inputs[f]=d})):d.items&&(d.type="sub");switch(d.type){case "cm_seperator":break;case "text":k=c('<input type="text" value="1" name="" value="">').attr("name","context-menu-input-"+f).val(d.value||"").appendTo(m);break;case "textarea":k=c('<textarea name=""></textarea>').attr("name",
"context-menu-input-"+f).val(d.value||"").appendTo(m);d.height&&k.height(d.height);break;case "checkbox":k=c('<input type="checkbox" value="1" name="" value="">').attr("name","context-menu-input-"+f).val(d.value||"").prop("checked",!!d.selected).prependTo(m);break;case "radio":k=c('<input type="radio" value="1" name="" value="">').attr("name","context-menu-input-"+d.radio).val(d.value||"").prop("checked",!!d.selected).prependTo(m);break;case "select":k=c('<select name="">').attr("name","context-menu-input-"+
f).appendTo(m);d.options&&(c.each(d.options,function(a,b){c("<option></option>").val(a).text(b).appendTo(k)}),k.val(d.selected));break;case "sub":e(d).appendTo(g);d.appendTo=d.$node;t.create(d,b);g.data("contextMenu",d).addClass("context-menu-submenu");d.callback=null;break;case "html":c(d.html).appendTo(g);break;default:c.each([a,b],function(a,b){b.commands[f]=d;c.isFunction(d.callback)&&(b.callbacks[f]=d.callback)}),e(d).appendTo(g)}if(d.type&&"sub"!==d.type&&"html"!==d.type&&"cm_seperator"!==d.type&&
(k.on("focus",h.focusInput).on("blur",h.blurInput),d.events))k.on(d.events,a);d.icon&&(c.isFunction(d.icon)?d._icon=d.icon.call(this,this,g,f,d):"string"===typeof d.icon&&"fa-"==d.icon.substring(0,3)?d._icon=b.classNames.icon+" "+b.classNames.icon+"--fa fa "+d.icon:d._icon=b.classNames.icon+" "+b.classNames.icon+"-"+d.icon,g.addClass(d._icon))}d.$input=k;d.$label=m;g.appendTo(a.$menu);if(!a.hasTypes&&c.support.eventSelectstart)g.on("selectstart.disableTextSelect",h.abortevent)});a.$node||a.$menu.css("display",
"none").addClass("context-menu-root");a.$menu.appendTo(a.appendTo||document.body)},resize:function(a,b){var e;a.css({position:"absolute",display:"block"});a.data("width",(e=a.get(0)).getBoundingClientRect?Math.ceil(e.getBoundingClientRect().width):a.outerWidth()+1);a.css({position:"static",minWidth:"0px",maxWidth:"100000px"});a.find("> li > ul").each(function(){t.resize(c(this),!0)});b||a.find("ul").addBack().css({position:"",display:"",minWidth:"",maxWidth:""}).outerWidth(function(){return c(this).data("width")})},
update:function(a,b){var e=this;void 0===b&&(b=a,t.resize(a.$menu));a.$menu.children().each(function(){var f=c(this),d=f.data("contextMenuKey"),g=a.items[d],h=c.isFunction(g.disabled)&&g.disabled.call(e,d,b)||!0===g.disabled;var k=c.isFunction(g.visible)?g.visible.call(e,d,b):"undefined"!==typeof g.visible?!0===g.visible:!0;f[k?"show":"hide"]();f[h?"addClass":"removeClass"](b.classNames.disabled);c.isFunction(g.icon)&&(f.removeClass(g._icon),g._icon=g.icon.call(this,e,f,d,g),f.addClass(g._icon));
if(g.type)switch(f.find("input, select, textarea").prop("disabled",h),g.type){case "text":case "textarea":g.$input.val(g.value||"");break;case "checkbox":case "radio":g.$input.val(g.value||"").prop("checked",!!g.selected);break;case "select":g.$input.val(g.selected||"")}g.$menu&&t.update.call(e,g,b)})},layer:function(a,b){a=a.$layer=c('<div id="context-menu-layer" style="position:fixed; z-index:'+b+'; top:0; left:0; opacity: 0; filter: alpha(opacity=0); background-color: #000;"></div>').css({height:u.height(),
width:u.width(),display:"block"}).data("contextMenuRoot",a).insertBefore(this).on("contextmenu",h.abortevent).on("mousedown",h.layerClick);void 0===document.body.style.maxWidth&&a.css({position:"absolute",height:c(document).height()});return a}};c.fn.contextMenu=function(a){var b=this;if(0<this.length)if(void 0===a)this.first().trigger("contextmenu");else if(void 0!==a.x&&void 0!==a.y)this.first().trigger(c.Event("contextmenu",{pageX:a.x,pageY:a.y,mouseButton:a.button}));else if("hide"===a){var e=
this.first().data("contextMenu")?this.first().data("contextMenu").$menu:null;e&&e.trigger("contextmenu:hide")}else"destroy"===a?c.contextMenu("destroy",{context:this}):c.isPlainObject(a)?(a.context=this,c.contextMenu("create",a)):a?this.removeClass("context-menu-disabled"):a||this.addClass("context-menu-disabled");else c.each(p,function(){this.selector===b.selector&&(a.data=this,c.extend(a.data,{trigger:"demand"}))}),h.contextmenu.call(a.target,a);return this};c.contextMenu=function(a,b){"string"!==
typeof a&&(b=a,a="create");"string"===typeof b?b={selector:b}:void 0===b&&(b={});var e=c.extend(!0,{},A,b||{}),f=c(document),d=f,g=!1;e.context&&e.context.length?(d=c(e.context).first(),e.context=d.get(0),g=e.context!==document):e.context=document;switch(a){case "create":if(!e.selector)throw Error("No selector specified");if(e.selector.match(/.context-menu-(list|item|input)($|\s)/))throw Error('Cannot bind to selector "'+e.selector+'" as it contains a reserved className');if(!e.build&&(!e.items||
c.isEmptyObject(e.items)))throw Error("No Items specified");y++;e.ns=".contextMenu"+y;g||(v[e.selector]=e.ns);p[e.ns]=e;e.trigger||(e.trigger="right");w||(a={"contextmenu:focus.contextMenu":h.focusItem,"contextmenu:blur.contextMenu":h.blurItem,"contextmenu.contextMenu":h.abortevent,"mouseenter.contextMenu":h.itemMouseenter,"mouseleave.contextMenu":h.itemMouseleave},a["click"===e.itemClickEvent?"click.contextMenu":"mouseup.contextMenu"]=h.itemClick,f.on({"contextmenu:hide.contextMenu":h.hideMenu,"prevcommand.contextMenu":h.prevItem,
"nextcommand.contextMenu":h.nextItem,"contextmenu.contextMenu":h.abortevent,"mouseenter.contextMenu":h.menuMouseenter,"mouseleave.contextMenu":h.menuMouseleave},".context-menu-list").on("mouseup.contextMenu",".context-menu-input",h.inputClick).on(a,".context-menu-item"),w=!0);d.on("contextmenu"+e.ns,e.selector,e,h.contextmenu);if(g)d.on("remove"+e.ns,function(){c(this).contextMenu("destroy")});switch(e.trigger){case "hover":d.on("mouseenter"+e.ns,e.selector,e,h.mouseenter).on("mouseleave"+e.ns,e.selector,
e,h.mouseleave);break;case "left":d.on("click"+e.ns,e.selector,e,h.click)}e.build||t.create(e);break;case "destroy":if(g){var l=e.context;c.each(p,function(a,b){if(b.context!==l)return!0;k=c(".context-menu-list").filter(":visible");k.length&&k.data().contextMenuRoot.$trigger.is(c(b.context).find(b.selector))&&k.trigger("contextmenu:hide",{force:!0});try{p[b.ns].$menu&&p[b.ns].$menu.remove(),delete p[b.ns]}catch(G){p[b.ns]=null}c(b.context).off(b.ns);return!0})}else if(!e.selector)f.off(".contextMenu .contextMenuAutoHide"),
c.each(p,function(a,b){c(b.context).off(b.ns)}),v={},p={},y=0,w=!1,c("#context-menu-layer, .context-menu-list").remove();else if(v[e.selector]){var k=c(".context-menu-list").filter(":visible");k.length&&k.data().contextMenuRoot.$trigger.is(e.selector)&&k.trigger("contextmenu:hide",{force:!0});try{p[v[e.selector]].$menu&&p[v[e.selector]].$menu.remove(),delete p[v[e.selector]]}catch(F){p[v[e.selector]]=null}f.off(v[e.selector])}break;case "html5":(!c.support.htmlCommand&&!c.support.htmlMenuitem||"boolean"===
typeof b&&b)&&c('menu[type="context"]').each(function(){this.id&&c.contextMenu({selector:"[contextmenu="+this.id+"]",items:c.contextMenu.fromMenu(this)})}).css("display","none");break;default:throw Error('Unknown operation "'+a+'"');}return this};c.contextMenu.setInputValues=function(a,b){void 0===b&&(b={});c.each(a.inputs,function(a,c){switch(c.type){case "text":case "textarea":c.value=b[a]||"";break;case "checkbox":c.selected=b[a]?!0:!1;break;case "radio":c.selected=(b[c.radio]||"")===c.value;break;
case "select":c.selected=b[a]||""}})};c.contextMenu.getInputValues=function(a,b){void 0===b&&(b={});c.each(a.inputs,function(a,c){switch(c.type){case "text":case "textarea":case "select":b[a]=c.$input.val();break;case "checkbox":b[a]=c.$input.prop("checked");break;case "radio":c.$input.prop("checked")&&(b[c.radio]=c.value)}});return b};c.contextMenu.fromMenu=function(a){a=c(a);var b={};r(b,a.children());return b};c.contextMenu.defaults=A;c.contextMenu.types=z;c.contextMenu.handle=h;c.contextMenu.op=
t;c.contextMenu.menus=p});
